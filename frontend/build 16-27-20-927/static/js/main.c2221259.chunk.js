(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{50:function(e,t,a){e.exports=a(86)},59:function(e,t,a){},60:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(1),c=a(16),s=a.n(c),o=(a(59),a(3)),i=(a(60),a(4)),u=a(8),m=a(2),E=a.n(m),d=a(5),p=a(6),g=a.n(p),v=JSON.parse(localStorage.getItem("userInfo")),f=v?{headers:{Authorization:"Bearer ".concat(v.token)}}:null,b=(v&&v.name,function(e){var t=e.seller,a=void 0===t?"":t,n=e.name,r=void 0===n?"":n,l=e.category,c=void 0===l?"":l,s=e.min,o=void 0===s?0:s,i=e.max,u=void 0===i?0:i,m=e.rating,p=void 0===m?0:m,v=e.order,f=void 0===v?"":v,b=e.pageNumber,y=void 0===b?"":b;return function(){var e=Object(d.a)(E.a.mark((function e(t){var n,l,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"PRODUCT_LIST_REQUEST"}),e.next=4,g.a.get("/api/products?pageNumber=".concat(y,"&&seller=").concat(a,"&&name=").concat(r,"&&category=").concat(c,"&&min=").concat(o,"&&max=").concat(u,"&&rating=").concat(p,"/order/").concat(f));case 4:n=e.sent,l=n.data,console.log(y),t({type:"PRODUCT_LIST_SUCCESS",payload:l}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,t({type:"PRODUCT_LIST_FAIL",payload:s});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}),y=function(e){return function(){var t=Object(d.a)(E.a.mark((function t(a){var n,r,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"USER_DETAILS_REQUEST",payload:e}),t.prev=1,t.next=4,g.a.get("/api/users/".concat(e,"/details"),f||null);case 4:n=t.sent,r=n.data,a({type:"USER_DETAILS_SUCCESS",payload:r}),console.log(r),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),l=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,a({type:"USER_DETAILS_FAIL",payload:l}),console.log(l);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()};function S(e){var t=e.numReviews,a=e.rates,n=e.caption;return r.a.createElement("div",{className:"rating"},r.a.createElement("span",null,r.a.createElement("i",{className:a>=1?"fa fa-star":a>=1.5?"fa fa-star-half-o":"fa fa-star-o"})),r.a.createElement("span",null,r.a.createElement("i",{className:a>=2?"fa fa-star":a>=2.5?"fa fa-star-half-o":"fa fa-star-o"})),r.a.createElement("span",null,r.a.createElement("i",{className:a>=3?"fa fa-star":a>=3.5?"fa fa-star-half-o":"fa fa-star-o"})),r.a.createElement("span",null,r.a.createElement("i",{className:a>=5?"fa fa-star":a>=5.5?"fa fa-star-half-o":"fa fa-star-o"})),n?r.a.createElement("span",null,n):r.a.createElement("span",null,t," Reviews"))}var h=function(){return r.a.createElement("div",{className:"loading fa-3x"},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"})))},_=function(e){var t=e.msg,a=e.variant;return r.a.createElement("div",{className:a},t)};function O(e){var t=e.product;return r.a.createElement("div",{key:t._id,className:"product"},r.a.createElement(i.b,{to:"/product/".concat(t._id)},r.a.createElement("img",{className:"medium",src:t.image,alt:t.name})),r.a.createElement("div",{className:"card-body"},r.a.createElement(i.b,{to:"/product/".concat(t._id)},r.a.createElement("h2",null,t.name)),r.a.createElement(S,{rating:t.rating,numReviews:t.numReviews}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"price"},"$",t.price),r.a.createElement("div",null,t.seller&&r.a.createElement(i.b,{to:"/seller/".concat(t.seller._id)},t.seller.seller.name)))))}a(80);var R=a(47);var C=function(e){var t=Object(l.c)((function(e){return e.productList})),a=t.products,c=t.loading,s=t.error,o=Object(l.c)((function(e){return e.topSellers})),u=o.users,m=o.loading,p=o.error,v=Object(l.b)();return Object(n.useEffect)((function(){v(b({})),v(function(){var e=Object(d.a)(E.a.mark((function e(t,a){var n,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"USER_LIST_REQUEST"}),e.prev=1,e.next=4,g.a.get("/api/users/top-sellers");case 4:n=e.sent,r=n.data,t({type:"USER_LIST_SUCCESS",payload:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,t({type:"USER_LIST_FAIL",payload:l});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}())}),[v]),r.a.createElement("div",null,r.a.createElement("h2",null,"Top Sellers"),m?r.a.createElement(h,null):p||u&&0===u.length?r.a.createElement(_,{variant:"danger",msg:p}):r.a.createElement("div",{style:{marginLeft:"20%"}},r.a.createElement(R.Carousel,{showArrows:!0,autoPlay:!0,showThumbs:!1,className:"carousel"},u&&u.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(i.b,{to:"/seller/".concat(e._id)},r.a.createElement("img",{src:e.seller.logo?e.seller.logo:"/",alt:e.seller.name}),r.a.createElement("p",{className:"legend"},e.seller.name," ")))})))),r.a.createElement("h2",null,"Featured Products"),c?r.a.createElement(h,null):s?r.a.createElement(_,{variant:"danger",msg:s}):r.a.createElement("ul",{className:"row center"},a&&a.map((function(e){return r.a.createElement(O,{product:e,key:e._id})}))))},I=a(17),T=a(9);var N=function(e){var t=Object(u.g)().pageNumber,a=void 0===t?1:t,c=e.match.path.indexOf("/seller")>=0,s=Object(n.useState)(!1),m=Object(o.a)(s,2),p=m[0],v=m[1],y=Object(n.useState)(""),S=Object(o.a)(y,2),O=S[0],R=S[1],C=Object(n.useState)(""),N=Object(o.a)(C,2),j=N[0],D=N[1],A=Object(n.useState)(0),U=Object(o.a)(A,2),w=U[0],L=U[1],P=Object(n.useState)(""),x=Object(o.a)(P,2),k=x[0],F=x[1],Q=Object(n.useState)(""),M=Object(o.a)(Q,2),V=M[0],G=M[1],$=Object(n.useState)(""),Y=Object(o.a)($,2),q=Y[0],J=Y[1],W=Object(n.useState)(""),B=Object(o.a)(W,2),H=B[0],z=B[1],X=Object(n.useState)(0),K=Object(o.a)(X,2),Z=K[0],ee=K[1],te=Object(l.c)((function(e){return e.productList})),ae=te.loading,ne=te.products,re=te.error,le=te.pages,ce=(te.page,Object(l.c)((function(e){return e.productSave}))),se=ce.loading,oe=ce.success,ie=ce.error,ue=Object(l.c)((function(e){return e.productDelete})),me=ue.loading,Ee=ue.success,de=ue.error,pe=Object(l.c)((function(e){return e.userSignin})).userInfo,ge=Object(l.b)(),ve=function(e){var t;window.confirm("Are you sure you want to delete?")&&ge((t=e._id,function(){var e=Object(d.a)(E.a.mark((function e(a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PRODUCT_DELETE_REQUEST",payload:t}),e.next=4,g.a.delete("/api/products/".concat(t),f);case 4:n=e.sent,r=n.data,a({type:"PRODUCT_DELETE_SUCCESS",payload:r,success:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:"PRODUCT_DELETE_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},fe=Object(n.useState)(!1),be=Object(o.a)(fe,2),ye=be[0],Se=be[1],he=Object(n.useState)(""),_e=Object(o.a)(he,2),Oe=_e[0],Re=_e[1],Ce=function(){var e=Object(d.a)(E.a.mark((function e(t){var a,n,r,l,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.files[0],(n=new FormData).append("imageFile",a),Se(!0),e.prev=5,r={"Content-Type":"multipart/form-data"},e.next=9,g.a.post("/api/uploads",n,Object(T.a)(Object(T.a)({},f),r));case 9:l=e.sent,c=l.data,F(c),Se(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),Re(e.t0.message),Se(!1);case 19:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){oe&&v(!1),ge(b({seller:c?pe._id:"",pageNumber:a})),Ee&&ge({type:"PRODUCT_DELETE_RESET"})}),[oe,Ee,a]);var Ie=function(e){v(!0),R(e._id),D(e.name),L(e.price),G(e.brand),J(e.category),ee(e.countInStock),z(e.description),F(e.image)};return r.a.createElement("div",{className:"content content-margined"},r.a.createElement("div",{className:"product-header"},r.a.createElement("h3",null,"Products"),r.a.createElement("button",{onClick:function(){return Ie({})}},"Create Product")),p&&r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),ge((t={_id:O,name:j,price:w,brand:V,image:k,description:H,countInStock:Z,category:q},function(){var e=Object(d.a)(E.a.mark((function e(a){var n,r,l,c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a({type:"PRODUCT_SAVE_REQUEST"}),t._id){e.next=10;break}return e.next=5,g.a.post("/api/products",t,f);case 5:n=e.sent,r=n.data,a({type:"PRODUCT_SAVE_SUCCESS",payload:r}),e.next=15;break;case 10:return e.next=12,g.a.put("/api/products/".concat(t._id),t,f);case 12:l=e.sent,c=l.data,a({type:"PRODUCT_SAVE_SUCCESS",payload:c});case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),s=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,a({type:"PRODUCT_SAVE_FAIL",payload:s});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"Product Registration")),r.a.createElement("li",null,se&&r.a.createElement(h,null),ie&&r.a.createElement(_,{variant:"danger",msg:ie}),me&&r.a.createElement(h,null),de&&r.a.createElement(_,{variant:"danger",msg:de})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"  Name "),r.a.createElement("input",{type:"text",name:"name",id:"name",value:j,onChange:function(e){return D(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"price"},"  Price "),r.a.createElement("input",{type:"text",name:"price",id:"price",value:w,onChange:function(e){return L(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"brand"},"  brand "),r.a.createElement("input",{type:"text",name:"brand",id:"brand",value:V,onChange:function(e){return G(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"category"},"  Category "),r.a.createElement("input",{type:"text",name:"category",id:"category",value:q,onChange:function(e){return J(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"countInStock"},"  CountInStock "),r.a.createElement("input",{type:"text",name:"countInStock",id:"countInStock",value:Z,onChange:function(e){return ee(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"image"},"  Image "),r.a.createElement("input",{type:"text",name:"image",id:"image",value:k,onChange:function(e){return F(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"imageFile"},"  Image File "),r.a.createElement("input",{type:"file",name:"imageFile",id:"imageFile",label:"Choose Image",onChange:Ce}),ye&&r.a.createElement(h,null),Oe&&r.a.createElement(_,{variant:"danger",msg:Oe})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"description"},"  Description "),r.a.createElement("textarea",{name:"description",id:"description",value:H,onChange:function(e){return z(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{className:"button primary",type:"submit"}," ",O?"Update":"Create"," ")),r.a.createElement("li",null,r.a.createElement("button",{className:"button secondary",onClick:function(){return v(!1)}}," Back "))))),r.a.createElement("div",{className:"product-list"},re&&r.a.createElement(_,{variant:"danger",msg:re}),ae&&r.a.createElement(h,null),!p&&r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Brand"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,ne&&ne.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,"    ",e._id,"       "),r.a.createElement("td",null,"    ",e.name,"      "),r.a.createElement("td",null,"    ",e.price,"     "),r.a.createElement("td",null,"    ",e.category,"  "),r.a.createElement("td",null,"    ",e.brand,"     "),r.a.createElement("td",null,r.a.createElement("button",{className:"button",onClick:function(){return Ie(e)}}," Edit   "),"",r.a.createElement("button",{className:"button",onClick:function(){return ve(e)}}," Delete     ")))})))),r.a.createElement("div",{className:"row center pagination "},Object(I.a)(Array(le).keys()).map((function(e){return r.a.createElement(i.b,{to:"/products/pageNumber/".concat(e+1)}," ",e+1," ")})))),r.a.createElement(i.b,{to:"/signin"}," Go to ")))};var j=function(e){var t=e.match.params.id,a=Object(n.useState)(1),c=Object(o.a)(a,2),s=c[0],u=c[1],m=Object(l.c)((function(e){return e.productDetails})),p=m.loading,v=m.product,b=m.error,y=Object(l.c)((function(e){return e.userSignin})).userInfo,O=Object(l.c)((function(e){return e.productCreateReview})),R=O.loading,C=O.error,T=O.success,N=Object(n.useState)(0),j=Object(o.a)(N,2),D=j[0],A=j[1],U=Object(n.useState)(""),w=Object(o.a)(U,2),L=w[0],P=w[1],x=Object(l.b)();return Object(n.useEffect)((function(){T&&(window.alert("Review Submitted Successfully"),A(" "),P(""),x({type:"PRODUCT_REVIEW_CREATE_RESET"})),x(function(e){return function(){var t=Object(d.a)(E.a.mark((function t(a){var n,r,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"PRODUCT_DETAILS_REQUEST"}),t.next=4,g.a.get("/api/products/"+e);case 4:n=t.sent,r=n.data,a({type:"PRODUCT_DETAILS_SUCCESS",payload:r}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),l=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,console.error(l),a({type:"PRODUCT_DETAILS_FAIL",payload:l});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[x,t]),r.a.createElement("div",null,p?r.a.createElement(h,null):b?r.a.createElement(_,{variant:"danger",msg:b}):r.a.createElement("div",null,r.a.createElement(i.b,{to:"/"},"Back To result "),r.a.createElement("div",{className:"row top"},r.a.createElement("div",{className:"col-1"},r.a.createElement("img",{src:v.image,alt:v.name,className:"large"})),r.a.createElement("div",{className:"col-2"},r.a.createElement("ul",{className:"card card-body"},r.a.createElement("li",null,r.a.createElement("h1",null,v.name)),r.a.createElement("li",null,r.a.createElement(S,{rates:v.rating,numReviews:v.numReviews}),"  "),r.a.createElement("li",null,"Price: $",v.price),r.a.createElement("li",null,"Description:",r.a.createElement("p",null,v.description," ")))),r.a.createElement("div",{className:"col-1"},r.a.createElement("div",{className:"card card-body"},r.a.createElement("ul",null,r.a.createElement("li",null,"Seller "," ",v.seller&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,r.a.createElement(i.b,{to:"/Seller/".concat(v.seller._id)}," ",v.seller.seller.name," ")),r.a.createElement(S,{numReviews:v.seller.seller.numReviews,rates:v.seller.seller.ratings}))),r.a.createElement("li",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",null,"Price"),r.a.createElement("div",{className:"price"}," $",v.price))),r.a.createElement("li",null,r.a.createElement("div",{className:"row",style:{padding:"4px"}},r.a.createElement("div",null,"Status"),r.a.createElement("div",null,v.countInStock>0?r.a.createElement("span",{className:"success"}," In Stock"):r.a.createElement("span",{className:"danger"}," Unavailable ")))),v.countInStock>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("div",{className:"row",style:{padding:"8px"}},r.a.createElement("div",null,"Qty"),r.a.createElement("div",null,r.a.createElement("select",{name:"",id:"",value:s,onChange:function(e){return u(e.target.value)}},Object(I.a)(Array(v.countInStock).keys()).map((function(e){return r.a.createElement("option",{key:e+1,value:e+1},"  ",e+1," ")})))))),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){e.history.push("/cart/"+t+"?qty="+s)},className:"primary block"},"Add to Cart"))))))),r.a.createElement("div",null,r.a.createElement("h2",{id:"reviews"},"Reviews"),v.reviews&&0===v.reviews.length&&r.a.createElement(_,{msg:"There is no views"}),r.a.createElement("ul",null,v.reviews&&v.reviews.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("strong",null,e.name),r.a.createElement(S,{rates:e.rating,caption:" "}),r.a.createElement("p",null,e.createdAt.substring(0,10)),r.a.createElement("p",null,e.comment))})),r.a.createElement("li",null,y?r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),L&&D?x(function(e,t){return function(){var a=Object(d.a)(E.a.mark((function a(n){var r,l,c;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"PRODUCT_REVIEW_CREATE_REQUEST"}),a.prev=1,a.next=4,g.a.post("/api/products/".concat(e,"/reviews"),t,f);case 4:r=a.sent,l=r.data,n({type:"PRODUCT_REVIEW_CREATE_SUCCESS",payload:l.review}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),c=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message,n({type:"PRODUCT_REVIEW_CREATE_FAIL",payload:c});case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}(t,{rating:D,comment:L,name:y.name})):alert("Please enter comment and rating")},className:"form-rate"},r.a.createElement("div",null,r.a.createElement("h2",null,"Write a customer review")),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"rating"},"Rating"),r.a.createElement("select",{value:D,onChange:function(e){return A(e.target.value)}},r.a.createElement("option",{value:""},"Select..."),r.a.createElement("option",{value:"1"},"1- Poor"),r.a.createElement("option",{value:"2"},"2- Fair"),r.a.createElement("option",{value:"3"},"3- Good"),r.a.createElement("option",{value:"4"},"4- Very Good"),r.a.createElement("option",{value:"5"},"5- Excellent"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"comment"},"Comment"),r.a.createElement("textarea",{id:"comment",value:L,onChange:function(e){return P(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("label",null),r.a.createElement("button",{className:"primary",type:"submit"}," Submit")),r.a.createElement("div",null,R&&r.a.createElement(h,null),C&&r.a.createElement(_,{variant:"danger",msg:C}))):r.a.createElement(_,null,"Please ",r.a.createElement(i.b,{to:"/signin"},"Sign in"),"to write a review"))))))},D=function(e,t){return function(){var a=Object(d.a)(E.a.mark((function a(n,r){var l,c,s,o,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.get("/api/products/"+e);case 3:l=a.sent,c=l.data,s=r(),(o=s.cart.cartItems).length>0&&c.seller._id!==o[0].seller._id?n({type:"CART_ADD_ITEM_FAIL",payload:"Can't Add To Cart. Buy from ".concat(o[0].seller.seller.name," in this order")}):n({type:"CART_ADD_ITEM",payload:{product:c._id,name:c.name,image:c.image,price:c.price,countInStock:c.countInStock,seller:c.seller,qty:t}}),localStorage.setItem("cartItems",JSON.stringify(r().cart.cartItems)),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0.message),i=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message,n({type:"CART_ADD_ITEM_FAIL",payload:i});case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()},A=function(e){return function(t){t({type:"CART_SAVE_SHIPPING",payload:e}),localStorage.setItem("shippingAddress",JSON.stringify(e))}};var U=function(e){var t=Object(l.c)((function(e){return e.cart})),a=t.cartItems,c=t.error,s=e.match.params.id,o=e.location.search?Number(e.location.search.split("=")[1]):1,u=Object(l.b)(),m=function(e){u(function(e){return function(){var t=Object(d.a)(E.a.mark((function t(a,n){var r,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"CART_REMOVE_ITEM",payload:e}),r=n(),l=r.cart.cartItems,localStorage.setItem("cartItems",JSON.stringify(l));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(e))};return Object(n.useEffect)((function(){s&&u(D(s,o))}),[]),r.a.createElement("div",{className:"cart"},r.a.createElement("div",{className:"cart-list"},r.a.createElement("ul",{className:"cart-list-container"},r.a.createElement("li",null,r.a.createElement("h3",null," Shopping Cart"),c&&r.a.createElement(_,{variant:"danger",msg:c}),r.a.createElement("div",null," Price")),0===a.length?r.a.createElement("div",null,"Cart is empty"):a.map((function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"cart-image"},r.a.createElement("img",{src:e.image,alt:"product"})),r.a.createElement("div",{className:"cart-name"},r.a.createElement("div",null,r.a.createElement(i.b,{to:"/product/"+e.product},e.name)),r.a.createElement("div",null,"Qty:",r.a.createElement("select",{value:e.qty,onChange:function(t){return u(D(e.product,t.target.value))}},Object(I.a)(Array(e.countInStock).keys()).map((function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)}))),r.a.createElement("button",{type:"button",className:"button",onClick:function(){return m(e.product)}},"Delete"))),r.a.createElement("div",{className:"cart-price"},"$",e.price))})))),r.a.createElement("div",{className:"cart-action"},r.a.createElement("h3",null,"Subtotal ( ",a.reduce((function(e,t){return e+t.qty}),0)," items) : $ (",a.reduce((function(e,t){return e+t.price*t.qty}),0)," )"),r.a.createElement("button",{onClick:function(){e.history.push("/signin?redirect=shipping")},className:"button primary full-width",disabled:0===a.length},"Proceed to checkout")))};var w=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),p=m[0],v=m[1],f=Object(l.c)((function(e){return e.userSignin})),b=f.loading,y=f.userInfo,S=f.error,O=Object(l.b)(),R=e.location.search?e.location.search.split("=")[1]:"/";return Object(n.useEffect)((function(){y&&e.history.push(R)}),[y,e.history,R]),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),O(function(e,t){return function(){var a=Object(d.a)(E.a.mark((function a(n){var r,l,c;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"USER_SIGNIN_REQUEST",payload:{email:e,password:t}}),a.next=4,g.a.post("/api/users/signin",{email:e,password:t});case 4:r=a.sent,l=r.data,n({type:"USER_SIGNIN_SUCCESS",payload:l}),localStorage.setItem("userInfo",JSON.stringify(l)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),c=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message,n({type:"USER_SIGNIN_FAIL",payload:c});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(c,p))}},r.a.createElement("ul",{className:"form-container"},b&&r.a.createElement(h,null),S&&r.a.createElement(_,{variant:"danger",msg:S}),r.a.createElement("li",null,r.a.createElement("h2",null,"Sign-In")),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"  Email "),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){return s(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){return v(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{className:"button primary",type:"submit"}," Sign in")),r.a.createElement("li",null," New to Amazona? "),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/"===R?"register":"register/redirect="+R,className:"button text-center secondary"},"Create your Amazona Account")))))};var L=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),p=m[0],v=m[1],f=Object(n.useState)(""),b=Object(o.a)(f,2),y=b[0],S=b[1],O=Object(n.useState)(""),R=Object(o.a)(O,2),C=(R[0],R[1]),I=Object(l.c)((function(e){return e.userRegister})),T=I.loading,N=I.userInfo,j=I.error,D=Object(l.b)(),A=e.location.search?e.location.search.split("=")[1]:"/";return Object(n.useEffect)((function(){N&&e.history.push(A)}),[N]),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),D((t={name:c,email:p,password:y},function(){var e=Object(d.a)(E.a.mark((function e(a){var n,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"USER_REGISTER_REQUEST",payload:t}),e.prev=1,e.next=4,g.a.post("/api/users/register",t);case 4:n=e.sent,r=n.data,a({type:"USER_REGISTER_SUCCESS",payload:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,a({type:"USER_REGISTER_FAIL",payload:l});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))}},T&&r.a.createElement(h,null),j&&r.a.createElement(_,{variant:"danger",msg:j}),r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"Create Account")),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"  Name "),r.a.createElement("input",{type:"text",name:"name",id:"name",onChange:function(e){return s(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"  Email "),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){return v(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){return S(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"rePassword"},"confirm Password"),r.a.createElement("input",{type:"password",name:"rePassword",id:"rePassword",onChange:function(e){return C(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{className:"button primary",type:"submit"}," Register")),r.a.createElement("li",null," Already has an Account ?",r.a.createElement(i.b,{to:"/"===A?"signin":"signin/redirect="+A,className:"button text-center secondary"}," Sign in")))))};var P=function(e){return r.a.createElement("div",{className:"checkout-steps"},r.a.createElement("div",{className:e.step1?"active":""},"Signin "),r.a.createElement("div",{className:e.step2?"active":""},"Shipping "),r.a.createElement("div",{className:e.step3?"active":""},"Payment "),r.a.createElement("div",{className:e.step4?"active":""},"Place an order "))};var x=function(e){var t=Object(l.c)((function(e){return e.cart})).shippingAddress,a=Object(l.c)((function(e){return e.mapAddress})).address,c=Object(n.useState)(t.lat),s=Object(o.a)(c,2),i=s[0],u=s[1],m=Object(n.useState)(t.lng),E=Object(o.a)(m,2),d=E[0],p=E[1],g=Object(n.useState)(t.fullName),v=Object(o.a)(g,2),f=v[0],b=v[1],y=Object(n.useState)(t.address),S=Object(o.a)(y,2),h=S[0],_=S[1],O=Object(n.useState)(t.country),R=Object(o.a)(O,2),C=R[0],I=R[1],T=Object(n.useState)(t.postalCode),N=Object(o.a)(T,2),j=N[0],D=N[1],U=Object(n.useState)(t.country),w=Object(o.a)(U,2),L=w[0],x=w[1],k=Object(l.c)((function(e){return e.userSignin})).userInfo;Object(n.useEffect)((function(){}),[]),k||e.history.push("/signin");var F=Object(l.b)();return r.a.createElement("div",null,r.a.createElement(P,{step1:!0,step2:!0}),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=a?a.lat:i,r=a?a.lng:d;a&&(u(a.lat),p(a.lng));var l=!0;n&&r||(l=window.confirm("You Didn't Set Your Location on Map. Continue ?")),l&&(F(A({address:h,postalCode:j,country:C,city:L,fullName:f,lat:n,lng:r})),e.history.push("payment"))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null," Shipping ")),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"fullName"},"  Full Name "),r.a.createElement("input",{type:"text",name:"fullName",id:"fullName",onChange:function(e){return b(e.target.value)},value:f})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"address"},"  Address "),r.a.createElement("input",{type:"text",name:"address",id:"address",onChange:function(e){return _(e.target.value)},value:h})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"postalCode"}," Postal Code"),r.a.createElement("input",{type:"text",name:"postalCode",id:"postalCode",onChange:function(e){return D(e.target.value)},value:j})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"city"}," City"),r.a.createElement("input",{type:"text",name:"city",id:"city",onChange:function(e){return x(e.target.value)},value:L})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"country"},"  Country "),r.a.createElement("input",{type:"country",name:"country",id:"country",onChange:function(e){return I(e.target.value)},value:C})),r.a.createElement("li",null,r.a.createElement("button",{className:"button primary",onClick:function(){F(A({fullName:f,address:h,city:L,postalCode:j,country:C,lat:i,lng:d})),e.history.push("/map")}}," Choose On Map")),r.a.createElement("li",null,r.a.createElement("button",{className:"button primary",type:"submit"}," Continue"))))))};var k=function(e){var t=Object(n.useState)("paypal"),a=Object(o.a)(t,2),c=a[0],s=a[1],i=(Object(l.c)((function(e){return e.userRegister})),Object(l.c)((function(e){return e.cart})).shippingAddress),u=Object(l.b)();return i.address&&i.city&&i.country||e.history.push("shipping"),r.a.createElement("div",null,r.a.createElement(P,{step1:!0,step2:!0,step3:!0}),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(t){var a;t.preventDefault(),u((a=c,function(e){e({type:"CART_SAVE_PAYMENT",payload:a})})),e.history.push("/placeorder")}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null," Payment Method ")),r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"paymentMethod",id:"paymentMethod",value:"paypal",onChange:function(e){return s(e.target.value)}}),r.a.createElement("label",{htmlFor:"paypal"},"  Paypal ")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"paymentMethod",id:"paymentMethod",value:"stripe",onChange:function(e){return s(e.target.value)}}),r.a.createElement("label",{htmlFor:"stripe"}," Stripe "))),r.a.createElement("li",null,r.a.createElement("button",{className:"button primary",type:"submit"}," Continue"))))))};var F=function(e){var t=Object(l.c)((function(e){return e.cart})),a=t.cartItems,c=t.shippingAddress,s=t.payment,o=Object(l.c)((function(e){return e.orderCreate})),u=o.success,m=o.error,p=o.loading,v=o.order,f=Object(l.b)();s||e.history.push("payment"),Object(n.useEffect)((function(){u&&(e.history.push("/order/".concat(v._id)),f({type:"ORDER_CREATE_RESET"}))}),[f,v,e.history,u,s]);var b=a.reduce((function(e,t){return e+t.price*t.qty}),0),y=b<100?0:10,S=.15*b,O=b+y+S;return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{step1:!0,step2:!0,step3:!0,step4:!0}),r.a.createElement("div",{className:"placeorder"},r.a.createElement("div",{className:"placeorder-info"},r.a.createElement("div",null,r.a.createElement("h3",null," Shipping Address "),r.a.createElement("div",null,r.a.createElement("strong",null,"  Name:")," ",c.fullName," ",r.a.createElement("br",null),r.a.createElement("strong",null," Address:"),t.shippingAddress.address," , ",t.shippingAddress.city," ,",t.shippingAddress.postalCode," , ",t.shippingAddress.country)),r.a.createElement("div",null,r.a.createElement("h3",null,"Payment"),r.a.createElement("div",null,"Payment Method: ",s)),r.a.createElement("div",null,r.a.createElement("ul",{className:"cart-list-container"},r.a.createElement("li",null,r.a.createElement("h3",null," Shopping Cart"),r.a.createElement("div",null," Price")),0===a.length?r.a.createElement("div",null,"Cart is empty"):a.map((function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"cart-image"},r.a.createElement("img",{src:e.image,alt:"product"})),r.a.createElement("div",{className:"cart-name"},r.a.createElement(i.b,{to:"/product/"+e.product},"   "),e.name),r.a.createElement("div",{className:"cart-price"},e.qty," x $",e.price," = $",e.qty*e.price),r.a.createElement("div",null))}))))),r.a.createElement("div",{className:"placeorder-action"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{className:"button primary full-width",onClick:function(){f(function(e){return function(){var t=Object(d.a)(E.a.mark((function t(a,n){var r,l,c,s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ORDER_CREATE_REQUEST",payload:e}),t.prev=1,r=n(),l=r.userSignin.userInfo,t.next=5,g.a.post("/api/orders",e,{headers:{Authorization:"Bearer ".concat(l.token)}});case 5:c=t.sent,s=c.data,a({type:"ORDER_CREATE_SUCCESS",payload:s.order}),a({type:"CART_EMPTY"}),localStorage.removeItem("cartItems"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),a({type:"ORDER_CREATE_FAIL",payload:t.t0.response&&t.t0.response.message?t.t0.response.message:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,a){return t.apply(this,arguments)}}()}({orderItems:a,shippingAddress:c,payment:s,itemsPrice:b,shippingPrice:y,taxPrice:S,totalPrice:O}))},disabled:0===t.cartItems.length},"Place Order")),p&&r.a.createElement(h,null),m&&r.a.createElement(_,{variant:"danger"},m),r.a.createElement("li",null,r.a.createElement("h3",null," Order Summary")),r.a.createElement("li",null,r.a.createElement("div",null,"Items"),r.a.createElement("div",null,"$",b.toFixed(2))),r.a.createElement("li",null,r.a.createElement("div",null,"shipping Address"),r.a.createElement("div",null,"$",y.toFixed(2))),r.a.createElement("li",null,r.a.createElement("div",null,"Tax"),r.a.createElement("div",null,"$",S.toFixed(2))),r.a.createElement("li",null,r.a.createElement("div",null,"Order Total"),r.a.createElement("div",null,"$",O.toFixed(2)))),r.a.createElement("h3",null,"Subtotal ( ",a.reduce((function(e,t){return e+t.qty}),0)," items) : $ (",a.reduce((function(e,t){return e+t.price*t.qty}),0)," )"))))},Q=a(23),M=a(48);var V=function(e){var t,a=e.match.params.id,c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],m=s[1],p=Object(l.c)((function(e){return e.orderDetails})),v=p.error,b=p.order,y=p.loading,S=Object(l.c)((function(e){return e.orderDeliver})),O=Object(l.c)((function(e){return e.userSignin})).userInfo,R=S.loading,C=S.success,I=S.error,T=Object(l.b)(),N=Object(l.c)((function(e){return e.orderPay})),j=N.success,D=N.error,A=N.loading;return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(E.a.mark((function e(){var t,a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/config/paypal");case 2:t=e.sent,a=t.data,(n=document.createElement("script")).type="text/javascript",n.src="https://wwww.paypal.com/sdk/js?client-id=".concat(a),n.async=!0,n.onload=function(){return m(!0)},document.body.appendChild(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!b||j||C||b&&b._id!==a?(T({type:"ORDER_PAY_RESET"}),T({type:"ORDER_DELIVER_RESET"}),T(function(e){return function(){var t=Object(d.a)(E.a.mark((function t(a,n){var r,l,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ORDER_DETAILS_REQUEST",payload:e}),t.prev=1,t.next=4,g.a.get("/api/orders/".concat(e),f);case 4:r=t.sent,l=r.data,a({type:"ORDER_DETAILS_SUCCESS",payload:l}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),c=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,a({type:"ORDER_DETAILS_FAIL",payload:c});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))):b.isPaid||(window.paypal?m(!0):e())}),[T,b,a,u,j,C]),y?r.a.createElement(h,null):v?r.a.createElement(_,(t={variant:"message"},Object(Q.a)(t,"variant","danger"),Object(Q.a)(t,"msg",v),t)):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Order: ",b&&b._id),r.a.createElement("div",{className:"placeorder"},r.a.createElement("div",{className:"placeorder-info"},r.a.createElement("div",null,r.a.createElement("h3",null," Shipping "),r.a.createElement("div",null,r.a.createElement("strong",null,"  Name:")," ",b.shippingAddress.fullName," ",r.a.createElement("br",null),r.a.createElement("strong",null," Address:"),b.shippingAddress.address," , ",b.shippingAddress.city,b.shippingAddress.postalCode," , ",b.shippingAddress.country),b.isDelivered?r.a.createElement(_,{variant:"success",msg:"Delivered at ".concat(b.deliveredAt)}):r.a.createElement(_,{variant:"danger",msg:"order is not delivered"})),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null," Payment Method:"),"  ",b.paymentMethod),b.isPaid?r.a.createElement(_,{msg:"Paid at ".concat(b.paidAt),variant:"success"}):r.a.createElement(_,{msg:"Not paid",variant:"danger"})),r.a.createElement("div",null,r.a.createElement("h3",null," Order Items"),r.a.createElement("ul",{className:"cart-list-container"},b.orderItems.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",{className:"cart-image"},r.a.createElement("img",{src:e.image,alt:"product"})),r.a.createElement("div",{className:"cart-name"},r.a.createElement(i.b,{to:"/product/"+e.product},"   "),e.name),r.a.createElement("div",{className:"cart-price"},e.qty," x $",e.price," = $",e.qty*e.price),r.a.createElement("div",null))}))))),r.a.createElement("div",{className:"placeorder-action"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("h3",null," Order Summary")),r.a.createElement("li",null,r.a.createElement("div",null,"Items"),r.a.createElement("div",null,"$",b.itemsPrice.toFixed(2))),r.a.createElement("li",null,r.a.createElement("div",null,"shippingAddress"),r.a.createElement("div",null,"$",b.shippingPrice.toFixed(2))),r.a.createElement("li",null,r.a.createElement("div",null,"Tax"),r.a.createElement("div",null,"$",b.taxPrice.toFixed(2))),r.a.createElement("li",null,r.a.createElement("div",null,"Order Total"),r.a.createElement("div",null,"$",b.totalPrice.toFixed(2))),!b.isPaid&&(!1===!u?r.a.createElement(h,null):r.a.createElement(r.a.Fragment,null,D&&r.a.createElement(_,{variant:"danger",msg:v}),A&&r.a.createElement(h,null),r.a.createElement(M.PayPalButton,{amount:b.totalPrice,onSuccess:function(e){T(function(e,t){return function(){var a=Object(d.a)(E.a.mark((function a(n){var r,l,c;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"ORDER_PAY_REQUEST",payload:{order:e,paymentResult:t}}),a.prev=1,a.next=4,g.a.put("/api/orders/".concat(e._id,"/pay"),t,f);case 4:r=a.sent,l=r.data,n({type:"ORDER_PAY_SUCCESS",payload:l}),console.log(l),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),c=a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message,n({type:"ORDER_PAY_FAIL",payload:c});case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}(b,e))}}))),O.isAdmin&&b.isPaid&&!b.isDelivered&&r.a.createElement("li",null,R&&r.a.createElement(h,null),I&&r.a.createElement(_,{variant:"danger",msg:v}),r.a.createElement("button",{onClick:function(){T(function(e){return function(){var t=Object(d.a)(E.a.mark((function t(a){var n,r,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ORDER_DELIVER_REQUEST",payload:e}),t.prev=1,t.next=4,g.a.put("/api/orders/".concat(e,"/deliver"),f);case 4:n=t.sent,r=n.data,a({type:"ORDER_DELIVER_SUCCESS",payload:r}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),l=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,a({type:"ORDER_DELIVER_FAIL",payload:l});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(b._id))},type:"button",className:"button block"}," Deliver Order "))))))};function G(e){var t=Object(l.c)((function(e){return e.myOrders})),a=t.error,c=t.loading,s=t.orders,o=Object(l.b)();return Object(n.useEffect)((function(){o(function(){var e=Object(d.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"ORDER_MINE_LIST_REQUEST"}),e.prev=1,e.next=4,g.a.get("/api/orders/client/orders",f);case 4:a=e.sent,n=a.data,t({type:"ORDER_MINE_LIST_SUCCESS",payload:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),r=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,t({type:"ORDER_MINE_LIST_FAIL",payload:r});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[o]),console.log(s),r.a.createElement("div",null,r.a.createElement("h1",null,"Order History"),c?r.a.createElement(h,null):a?r.a.createElement(_,{variant:"danger",msg:a}):r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"DATE"),r.a.createElement("td",null,"TOTAL"),r.a.createElement("td",null,"PAID"),r.a.createElement("td",null,"DELIVERED"),r.a.createElement("td",null,"ACTION"))),r.a.createElement("tbody",null,s&&s.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t._id),r.a.createElement("td",null,t.createdAt.substring(0,10)),r.a.createElement("td",null,t.totalPrice.toFixed(2)),r.a.createElement("td",null,t.isPaid&&t.paidAt?t.paidAt.substring(0,10):"No"),r.a.createElement("td",null,t.isDelivered?t.deliveredAt.substring(0,10):"No"),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",className:"small",onClick:function(){return e.history.push("/order/".concat(t._id))}}," Details")))}))))))}function $(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)(""),v=Object(o.a)(p,2),b=v[0],S=v[1],O=Object(n.useState)(""),R=Object(o.a)(O,2),C=R[0],I=R[1],T=Object(n.useState)(""),N=Object(o.a)(T,2),j=N[0],D=N[1],A=Object(n.useState)(""),U=Object(o.a)(A,2),w=U[0],L=U[1],P=Object(n.useState)(""),x=Object(o.a)(P,2),k=x[0],F=x[1],Q=Object(l.c)((function(e){return e.userSignin})).userInfo,M=Object(l.c)((function(e){return e.userProfile})),V=M.profileLoading,G=M.error,$=M.user,Y=Object(l.c)((function(e){return e.userProfileUpdate})),q=Y.loading,J=Y.error,W=Y.success,B=Object(l.b)();return Object(n.useEffect)((function(){$?(c($.name),m($.email),$.seller&&(D($.seller.name),L($.seller.logo),F($.seller.description))):(B({type:"USER_UPDATE_PROFILE_RESET"}),B(y(Q._id)))}),[$,Q._id,B]),r.a.createElement(r.a.Fragment,null,$&&r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),b!==C?alert("Password does not match"):B((t={userId:$._id,name:a,email:u,password:b,sellerName:j,sellerLogo:w,sellerDescription:k},function(){var e=Object(d.a)(E.a.mark((function e(a){var n,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"USER_UPDATE_PROFILE_REQUEST",payload:t}),e.prev=1,e.next=4,g.a.put("/api/users/profile",t,f);case 4:n=e.sent,r=n.data,a({type:"USER_UPDATE_PROFILE_SUCCESS",payload:r}),a({type:"USER_SIGNIN_SUCCESS",payload:r}),localStorage.setItem("userInfo",JSON.stringify(r)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),l=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,a({type:"USER_UPDATE_PROFILE_FAIL",payload:l});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()))},className:"form"},r.a.createElement("ul",{className:"form-container"},r.a.createElement("h1",null," User Profile"),r.a.createElement("li",null,V?r.a.createElement(h,null):G&&r.a.createElement(_,{variant:"danger",msg:G}),q?r.a.createElement(h,null):J?r.a.createElement(_,{variant:"danger",msg:J}):W&&r.a.createElement(_,{variant:"success",msg:"Profile Updated Successfully"})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"Name"},"Name"),r.a.createElement("input",{type:"text",value:a,placeholder:"Enter Name",id:"name",onChange:function(e){return c(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"Email"},"Email"),r.a.createElement("input",{type:"text",value:u,placeholder:"Enter Email",id:"email",onChange:function(e){return m(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"Password"},"Password"),r.a.createElement("input",{type:"password",placeholder:"Enter Password",id:"password",onChange:function(e){return S(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"ConfirmPassword"},"Confirm Password"),r.a.createElement("input",{type:"password",placeholder:"Enter Password Confirmation",id:"confirmPassword",onChange:function(e){return I(e.target.value)}})),$&&$.isSeller&&r.a.createElement(r.a.Fragment,null,"  ",r.a.createElement("h1",null,"Seller"),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"sellerName"},"Seller Name"),r.a.createElement("input",{type:"text",placeholder:"Enter Seller Name",id:"sellerName",value:j,onChange:function(e){return D(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"sellerLogo"},"seller Logo"),r.a.createElement("input",{type:"text",placeholder:"Enter Seller Logo",id:"sellerLogo",value:w,onChange:function(e){return L(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"sellerDescription"},"seller Description"),r.a.createElement("input",{type:"text",placeholder:"Enter Seller Description",id:"sellerDescription",value:k,onChange:function(e){return F(e.target.value)}}))),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"}," Update")))))}var Y=a(20);function q(e){var t=e.component,a=Object(Y.a)(e,["component"]),n=Object(l.c)((function(e){return e.userSignin})).userInfo;return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/signin"})}}))}function J(e){var t=e.component,a=Object(Y.a)(e,["component"]),n=Object(l.c)((function(e){return e.userSignin})).userInfo;return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return n&&n.isAdmin?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/signin"})}}))}function W(e){var t=e.match.path.indexOf("/seller")>=0,a=Object(l.c)((function(e){return e.orderslist})),c=a.loading,s=a.orders,o=a.error,i=Object(l.c)((function(e){return e.orderDelete})),u=i.loading,m=i.success,p=i.error,v=Object(l.c)((function(e){return e.userSignin})).userInfo,b=function(e){var t;window.confirm("Are you sure you want to delete?")&&(y((t=e._id,function(){var e=Object(d.a)(E.a.mark((function e(a){var n,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"ORDER_DELETE_REQUEST",payload:t}),e.prev=1,e.next=4,g.a.delete("/api/orders/".concat(t),f);case 4:n=e.sent,r=n.data,a({type:"ORDER_DELETE_SUCCESS",payload:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,a({type:"ORDER_DELETE_FAIL",payload:l});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),y({type:"ORDER_DELETE_RESET"}))},y=Object(l.b)();return Object(n.useEffect)((function(){y(function(e){var t=e.seller,a=void 0===t?"":t;return function(){var e=Object(d.a)(E.a.mark((function e(t){var n,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"ORDER_LIST_REQUEST"}),e.prev=1,e.next=4,g.a.get("/api/orders?seller".concat(a),f);case 4:n=e.sent,r=n.data,t({type:"ORDER_LIST_SUCCESS",payload:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,t({type:"ORDER_LIST_FAIL",payload:l});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}({seller:t?v._id:""}))}),[y,m]),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null," Orders"),c?r.a.createElement(h,null):o&&r.a.createElement(_,{variant:"danger",msg:o}),u?r.a.createElement(h,null):p&&r.a.createElement(_,{variant:"danger",msg:p})),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"DATE"),r.a.createElement("td",null,"TOTAL"),r.a.createElement("td",null,"PAID"),r.a.createElement("td",null,"DELIVERED"),r.a.createElement("td",null,"ACTION"))),r.a.createElement("tbody",null,s&&s.map((function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,t._id),r.a.createElement("td",null,t.user.name," "),r.a.createElement("td",null,t.createdAt.substring(0,10)),r.a.createElement("td",null,t.totalPrice.toFixed(2)),r.a.createElement("td",null,t.isPaid&&t.paidAt?t.paidAt.substring(0,10):"No"),r.a.createElement("td",null,t.isDelivered?t.deliveredAt.substring(0,10):"No"),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",className:"small",onClick:function(){return e.history.push("/order/".concat(t._id))}}," Details"),r.a.createElement("button",{className:"small",type:"submit",onClick:function(){return b(t)}}," Delete ")))})))))}function B(e){var t=Object(l.c)((function(e){return e.users})),a=t.users,c=t.error,s=t.loading,o=Object(l.c)((function(e){return e.deleteUser})),i=o.loading,u=o.success,m=o.error,p=Object(l.b)();Object(n.useEffect)((function(){p(function(){var e=Object(d.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"USER_LIST_REQUEST"}),e.prev=1,e.next=4,g.a.get("/api/users",f);case 4:a=e.sent,n=a.data,t({type:"USER_LIST_SUCCESS",payload:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),r=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,t({type:"USER_LIST_FAIL",payload:r});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[p,u]);var v=function(e){var t;window.confirm("Are you sure you want to delete ?")&&p((t=e._id,function(){var e=Object(d.a)(E.a.mark((function e(a){var n,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"USER_DELETE_REQUEST",payload:t}),e.prev=1,e.next=4,g.a.delete("/api/users/".concat(t,"/delete"),f);case 4:n=e.sent,r=n.data,a({type:"USER_DELETE_SUCCESS",payload:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,a({type:"USER_DELETE_FAIL",payload:l});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Users "),s&&r.a.createElement(h,null),c&&r.a.createElement(_,{variant:"danger",msg:c}),i&&r.a.createElement(h,null),m&&r.a.createElement(_,{variant:"danger",msg:m}),u&&r.a.createElement(_,{variant:"success",msg:"User deleted successfully"}),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," ID "),r.a.createElement("th",null," NAME "),r.a.createElement("th",null," EMAIL "),r.a.createElement("th",null," IS ADMIN "),r.a.createElement("th",null," IS SELLER "),r.a.createElement("th",null," ACTIONS "))),r.a.createElement("tbody",null,a&&a.map((function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null," ",t._id,"   "),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.isAdmin?"Yes":"No"),r.a.createElement("td",null,t.isSeller?"Yes":"No"),r.a.createElement("td",null,r.a.createElement("button",{className:"small",type:"button",onClick:function(){return e.history.push("/user/".concat(t._id,"/edit"))}},"Edit"),r.a.createElement("button",{className:"small",onClick:function(){return v(t)}},"Delete")))})))))}function H(e){var t=e.match.params.id,a=Object(l.c)((function(e){return e.userProfile})),c=a.user,s=a.loading,i=a.error,u=Object(l.c)((function(e){return e.userUpdate})),m=u.loading,p=u.error,v=u.success,b=Object(n.useState)(""),S=Object(o.a)(b,2),O=S[0],R=S[1],C=Object(n.useState)(""),I=Object(o.a)(C,2),T=I[0],N=I[1],j=Object(n.useState)(!1),D=Object(o.a)(j,2),A=D[0],U=D[1],w=Object(n.useState)(!1),L=Object(o.a)(w,2),P=L[0],x=L[1],k=Object(l.b)();Object(n.useEffect)((function(){v&&(k({type:"USER_EDIT_RESET"}),e.history.push("/users")),c?(R(c.name),N(c.email),U(c.isAdmin),x(c.isSeller)):k(y(t))}),[k,t,c,v]);return r.a.createElement("div",null,r.a.createElement("form",{className:"form",onSubmit:function(e){var a;e.preventDefault(),k((a={_id:t,name:O,email:T,isAdmin:A,isSeller:P},function(){var e=Object(d.a)(E.a.mark((function e(t){var n,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"USER_EDIT_REQUEST",payload:a}),e.prev=1,e.next=4,g.a.put("/api/users/".concat(a._id,"/edit"),a,f);case 4:n=e.sent,r=n.data,t({type:"USER_EDIT_SUCCESS",payload:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,t({type:"USER_EDIT_FAIL",payload:l});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("div",null,r.a.createElement("h1",null,"Edit User")),s?r.a.createElement(h,null):i&&r.a.createElement(_,{variant:"danger",msg:i}),m&&r.a.createElement(h,null),p&&r.a.createElement(_,{variant:"danger",msg:p}),r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",onChange:function(e){return R(e.target.value)},value:O})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:function(e){return N(e.target.value)},value:T})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"isSeller"},"IS Seller"),r.a.createElement("input",{type:"checkbox",id:"isSeller",onChange:function(e){return x(e.target.checked)},checked:P})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"isAdmin"},"IS Admin"),r.a.createElement("input",{type:"checkbox",id:"isAdmin",onChange:function(e){return U(e.target.checked)},checked:A})),r.a.createElement("button",{type:"submit",className:"primary"}," Update ")))))}function z(e){var t=e.component,a=Object(Y.a)(e,["component"]),n=Object(l.c)((function(e){return e.userSignin})).userInfo;return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return n&&n.isSeller?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/signin"})}}))}function X(e){var t=e.match.params.id,a=Object(l.c)((function(e){return e.userProfile})),c=a.profileLoading,s=a.user,o=a.error,i=Object(l.c)((function(e){return e.productList})),u=i.loading,m=i.products,E=i.errorProducts,d=Object(l.b)();return Object(n.useEffect)((function(){d(y(t)),d(b({seller:t}))}),[d,t]),r.a.createElement("div",{className:"row top"},r.a.createElement("div",{className:"col-1"}),r.a.createElement("div",{className:"col-1"},c?r.a.createElement(h,null):o?r.a.createElement(_,{variant:"danger",msg:o}):s&&r.a.createElement("ul",{className:"card card-body"},r.a.createElement("li",null,r.a.createElement("div",{className:"row start"},r.a.createElement("div",null,s.seller&&r.a.createElement("img",{src:s.seller.logo,alt:s.seller.name})),r.a.createElement("div",null,r.a.createElement("h1",null,s.seller&&s.seller.name)))),r.a.createElement("li",null,r.a.createElement(S,{value:s.seller.rating,numReviews:s.seller.numReviews})),r.a.createElement("li",null,r.a.createElement("a",{href:"mailto:".concat(s.email)}," Contanct Seller")),r.a.createElement("li",null,"  ",s.seller.description,"  "))),r.a.createElement("div",{className:"col-3"},u?r.a.createElement(h,null):E?r.a.createElement(_,{variant:"danger",msg:E}):0===m.length?r.a.createElement(_,{variant:"danger",msg:"No product found From this user.seller"}):r.a.createElement("ul",{className:"card card-body"},r.a.createElement("li",null,r.a.createElement("div",{className:"row center"},m&&m.map((function(e){return r.a.createElement(O,{key:e._id,product:e})})))))))}function K(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),l=a[0],c=a[1];return r.a.createElement("form",{className:"search",onSubmit:function(t){t.preventDefault(),e.history.push("/search/name/".concat(l))}},r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"text",name:"q",id:"q",onChange:function(e){return c(e.target.value)}}),r.a.createElement("button",{className:"primary",type:"submit"}," ",r.a.createElement("i",{className:"fa fa-search"}))))}var Z=[{name:"Any",min:0,max:1e6},{name:"$1 to $10",min:1,max:10},{name:"$10 to $100",min:10,max:100},{name:"$100 to $1000",min:100,max:1e3}],ee=[{name:"4 stars & up",rating:4},{name:"3 stars & up",rating:3},{name:"2 stars & up",rating:2},{name:"1 stars & up",rating:1}];function te(e){var t=Object(u.g)(),a=t.name,c=void 0===a?"all":a,s=t.category,o=void 0===s?"all":s,m=t.min,E=void 0===m?0:m,d=t.max,p=void 0===d?0:d,g=t.rating,v=t.order,f=void 0===v?"newest":v,y=t.pageNumber,R=void 0===y?1:y,C=Object(l.b)(),T=Object(l.c)((function(e){return e.productList})),N=T.loading,j=T.error,D=T.products,A=T.page,U=T.pages,w=Object(l.c)((function(e){return e.productCategoryList})),L=w.loading,P=w.error,x=w.categories,k=function(e){var t=e.category||o,a=e.page||R,n=e.name||c,r=e.min?e.min:0===e.min?0:E,l=e.max||p,s=e.rating||g,i=e.order||f;return"/search/category/".concat(t,"/name/").concat(n,"/min/").concat(r,"/max/").concat(l,"/rating/").concat(s,"/order/").concat(i,"/pageNumber/").concat(a)};return Object(n.useEffect)((function(){C(b({pageNumber:R,name:"all"!==c?c:"",category:"all"!==o?o:"",min:E,max:p,rating:g,order:f}))}),[o,C,c,p,E,g,f,R]),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},N?r.a.createElement(h,null):j?r.a.createElement(_,{variant:"danger",msg:j}):r.a.createElement("div",null,D.length," Results"),r.a.createElement("div",null,"Sort by "," ",r.a.createElement("select",{value:f,onChange:function(t){e.history.push(k({order:t.target.value}))}},r.a.createElement("option",{value:"newest"}," Newest Arrivals"),r.a.createElement("option",{value:"lowest"}," Price: Low to High"),r.a.createElement("option",{value:"highest"}," Price: High to LOW "),r.a.createElement("option",{value:"toprated"}," Avg top rated ")))),r.a.createElement("div",{className:"row top"},r.a.createElement("div",{className:"col-1"},r.a.createElement("h3",null,"Departments"),r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{className:"all"===o?"active":"",to:k({category:"all"})},"Any")),L?r.a.createElement(h,null):P&&r.a.createElement(_,{variant:"danger",error:P}),x.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(i.b,{className:e===o?"active":"",to:k({category:e})},e))})))),r.a.createElement("div",null,r.a.createElement("h3",null,"Price"),r.a.createElement("ul",null,Z.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement(i.b,{to:k({min:e.min,max:e.max}),className:"".concat(e.min," - ").concat(e.max)==="".concat(E," - ").concat(p,"}")?"active":""},e.name))})))),r.a.createElement("div",null,r.a.createElement("h3",null,"Avg. Customer Review"),r.a.createElement("ul",null,ee.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement(i.b,{to:k({rating:e.rating}),className:"".concat(e.rating)?"active":""},r.a.createElement(S,{rates:e.rating,caption:" & up"})))}))))),r.a.createElement("div",{className:"col-3"},N?r.a.createElement(h,null):j?r.a.createElement(_,{variant:"danger",msg:j}):r.a.createElement(r.a.Fragment,null,0===D.length&&r.a.createElement(_,{variant:"danger",msg:"No Product Found"}),r.a.createElement("div",{className:"row center"},D.map((function(e){return r.a.createElement(O,{key:e._id,product:e})}))),r.a.createElement("div",{className:"row center pagination "}," ",Object(I.a)(Array(U).keys()).map((function(e){return r.a.createElement(i.b,{key:e+1,to:k({page:e+1}),className:e+1===A?"active":""}," ",e+1," ")})))))))}var ae=a(24),ne=["places"],re={lat:45.512,lng:-73.56};function le(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(re),i=Object(o.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)(u),v=Object(o.a)(p,2),f=v[0],b=v[1],y=Object(n.useRef)(null),S=Object(n.useRef)(null),_=Object(n.useRef)(null),O=Object(l.b)();Object(n.useEffect)((function(){(function(){var e=Object(d.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/config/google");case 2:t=e.sent,a=t.data,c(a),R();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var R=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){m({lat:e.coords.latitude,lng:e.coords.longitude}),b({lat:e.coords.latitude,lng:e.coords.longitude})})):alert("Ooops, Geolocation are not supported by a browser")};return a?r.a.createElement("div",{className:"map"},r.a.createElement(ae.b,{libraries:ne,googleMapsApiKey:a},r.a.createElement(ae.a,{id:"sample-map",mapContainerStyle:{height:"100%",width:"100%"},zoom:15,center:u,onLoad:function(e){y.current=e},onIdle:function(){b({lat:y.current.center.lat(),lng:y.current.center.lng()})}},r.a.createElement(ae.d,{onLoad:function(e){S.current=e},onPlacesChanged:function(){var e=S.current.getPlaces()[0].geometry.location;m({lat:e.lat(),lng:e.lng()}),b({lat:e.lat(),lng:e.lng()})}},r.a.createElement("div",{className:"map-input-box"},r.a.createElement("input",{type:"text",placeholder:"Enter your Address"}),r.a.createElement("button",{onClick:function(){var e=S.current.getPlaces();e&&1===e.length?O({type:"USER_ADDRESS_MAP_CONFIRM",payload:{lat:f.lat,long:f.lng,address:e[0].formatted_address,name:e[0].name,vicinity:e[0].vicinity,googleAddressId:e[0].id}}):alert("Please enter your address")},type:"button",className:"primary"}," Confirm "))),r.a.createElement(ae.c,{position:f,onLoad:function(e){_.current=e}})))):r.a.createElement(h,null)}var ce=function(){return document.querySelector(".sidebar").classList.toggle("open")};var se=function(){var e=Object(l.c)((function(e){return e.cart})).cartItems,t=Object(l.c)((function(e){return e.userSignin})).userInfo,a=Object(n.useState)(null),c=Object(o.a)(a,2),s=c[0],m=c[1],p=Object(l.c)((function(e){return e.productCategoryList})),v=p.loading,f=p.error,b=p.categories,y=Object(l.b)();return Object(n.useEffect)((function(){m(t),y(function(){var e=Object(d.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"PRODUCT_CATEGORY_REQUEST"}),e.next=4,g.a.get("/api/products/categories");case 4:a=e.sent,n=a.data,t({type:"PRODUCT_CATEGORY_SUCCESS",payload:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,t({type:"PRODUCT_CATEGORY_REQUEST",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[y]),r.a.createElement(i.a,null,r.a.createElement("div",{className:"grid-container"},r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"brand"},r.a.createElement("button",{onClick:ce}," \u2630 "),r.a.createElement(i.b,{to:"/"},"Amazona ")),r.a.createElement("div",null,r.a.createElement(u.b,{render:function(e){var t=e.history;return r.a.createElement(K,{history:t})}})),r.a.createElement("div",{className:"header-links"},r.a.createElement(i.b,{to:"/cart"}," Cart ",e&&e.length>0&&r.a.createElement("span",{className:"badge"},e.length)),s?r.a.createElement("div",{className:"dropdown"},r.a.createElement(i.b,{to:"/"},s.name," ",r.a.createElement("i",{className:"fa fa-caret-down"})),r.a.createElement("ul",{className:"dropdown-content"},r.a.createElement("li",null,r.a.createElement(i.b,{to:"/profile"},"User Profile")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/orderhistory"},"Order History")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return y((function(e){localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),e({type:"USER_SIGNOUT"}),window.location.assign("/")}))}},"Sign Out")))):r.a.createElement(i.b,{to:"/signin"}," Sign in "),t&&t.isSeller&&r.a.createElement("div",{className:"dropdown"},r.a.createElement(i.b,{to:"/#admin"}," Seller ",r.a.createElement("i",{className:"fa fa-caret-down"})),r.a.createElement("ul",{className:"dropdown-content"},r.a.createElement("li",null,r.a.createElement(i.b,{to:"/products/seller"}," Products ")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/orders/seller"}," Orders ")))),t&&t.isAdmin&&r.a.createElement("div",{className:"dropdown"},r.a.createElement(i.b,{to:"/#admin"}," Admin ",r.a.createElement("i",{className:"fa fa-caret-down"})),r.a.createElement("ul",{className:"dropdown-content"},r.a.createElement("li",null,r.a.createElement(i.b,{to:"/dashboard"}," Dashboard ")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/products"}," Products ")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/orderlist"}," Orders ")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/users"}," Users ")))))),r.a.createElement("aside",{className:"sidebar"},r.a.createElement("h3",null,"Shopping Categories"),r.a.createElement("ul",{className:"categories"},r.a.createElement("li",null,r.a.createElement("strong",null,"Categories"),r.a.createElement("button",{onClick:function(){return ce},className:"close-sidebar",type:"button"},r.a.createElement("i",{className:"fa fa-close"}))),v?r.a.createElement(h,null):f&&r.a.createElement(_,{variant:"danger",error:f}),b.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(i.b,{to:"/search/category/".concat(e),onClick:ce},e))})))),r.a.createElement("main",{className:"main"},r.a.createElement("div",{className:"content"},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/seller/:id",component:X}),r.a.createElement(u.b,{path:"/product/:id",component:j}),r.a.createElement(u.b,{path:"/shipping",component:x}),r.a.createElement(u.b,{path:"/cart/:id?",component:U}),r.a.createElement(u.b,{path:"/",exact:!0,component:C}),r.a.createElement(u.b,{path:"/signin",component:w}),r.a.createElement(u.b,{path:"/register",component:L}),r.a.createElement(u.b,{path:"/payment",component:k}),r.a.createElement(u.b,{path:"/placeorder",component:F}),r.a.createElement(u.b,{path:"/order/:id",component:V}),r.a.createElement(u.b,{path:"/orderHistory",component:G}),r.a.createElement(u.b,{path:"/search/name/:name?",component:te,exact:!0}),r.a.createElement(u.b,{path:"/search/category/:category",component:te,exact:!0}),r.a.createElement(u.b,{path:"/search/category/:category/name/:name",component:te,exact:!0}),r.a.createElement(u.b,{path:"/search/category/:category/name/:name/min/:min/max/:max/rating/:rating/order/:order/pageNumber/:pageNumber",component:te,exact:!0}),r.a.createElement(q,{path:"/profile",component:$}),r.a.createElement(q,{path:"/map",component:le}),r.a.createElement(J,{path:"/products",component:N,exact:!0}),r.a.createElement(J,{path:"/products/pageNumber/:pageNumber",component:N,exact:!0}),r.a.createElement(J,{path:"/orderlist",component:W,exact:!0}),r.a.createElement(J,{path:"/users",component:B}),r.a.createElement(J,{path:"/user/:id/edit",component:H}),r.a.createElement(z,{path:"/products/seller",component:N}),r.a.createElement(z,{path:"/orders/seller",component:W})))),r.a.createElement("footer",{className:"footer"},"&copy Janvier")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=a(19),ie=a(49);var ue=JSON.parse(localStorage.getItem("cartItems"))||[],me=JSON.parse(localStorage.getItem("userInfo"))||null,Ee={cart:{cartItems:ue,payment:"Paypal",shippingAddress:localStorage.getItem("shippingAddress")?JSON.parse(localStorage.getItem("shippingAddress")):{}},userSignin:{userInfo:me}},de=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||oe.d,pe=Object(oe.c)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_REQUEST":return{loading:!0,products:[]};case"PRODUCT_LIST_SUCCESS":var a=t.payload,n=a.products,r=a.page,l=a.pages;return{loading:!1,products:n,pages:l,page:r};case"PRODUCT_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DETAILS_REQUEST":return{loading:!0};case"PRODUCT_DETAILS_SUCCESS":return{loading:!1,product:t.payload};case"PRODUCT_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shippingAddress:{},payment:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_ADD_ITEM":var a=t.payload,n=e.cartItems.find((function(e){return e.product===a.product}));return n?Object(T.a)(Object(T.a)({},e),{},{error:"",cartItems:e.cartItems.map((function(e){return e.product===n.product?a:e}))}):Object(T.a)(Object(T.a)({},e),{},{error:"",cartItems:[].concat(Object(I.a)(e.cartItems),[a])});case"CART_REMOVE_ITEM":return Object(T.a)(Object(T.a)({},e),{},{error:" ",cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))});case"CART_SAVE_SHIPPING":return Object(T.a)(Object(T.a)({},e),{},{shippingAddress:t.payload});case"CART_SAVE_PAYMENT":return Object(T.a)(Object(T.a)({},e),{},{payment:t.payload});case"CART_EMPTY":return Object(T.a)(Object(T.a)({},e),{},{error:" ",cartItems:[]});case"CART_ADD_ITEM_FAIL":return Object(T.a)(Object(T.a)({},e),{},{error:t.payload});default:return e}},userSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SIGNIN_REQUEST":return{loading:!0};case"USER_SIGNIN_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_SIGNIN_FAIL":return{loading:!1,error:t.payload};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER_REQUEST":return{loading:!0};case"USER_REGISTER_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_REGISTER_FAIL":return{loading:!1,error:t.payload};default:return e}},productSave:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_SAVE_REQUEST":return{loading:!0};case"PRODUCT_SAVE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"PRODUCT_SAVE_FAIL":return{loading:!1,error:t.payload};default:return e}},productDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DELETE_REQUEST":return{loading:!0};case"PRODUCT_DELETE_SUCCESS":return{loading:!1,product:t.payload,success:!0};case"PRODUCT_DELETE_RESET":return{};case"PRODUCT_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},orderCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_CREATE_REQUEST":return{loading:!0};case"ORDER_CREATE_SUCCESS":return{loading:!1,success:!0,order:t.payload};case"ORDER_CREATE_FAIL":return{loading:!1,error:t.payload};case"ORDER_CREATE_RESET":return{};default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_DETAILS_REQUEST":return{loading:!0};case"ORDER_DETAILS_SUCCESS":return{loading:!1,order:t.payload};case"ORDER_DETAILS_FAIL":return{loading:!1,error:t.palyload};default:return e}},orderPay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_PAY_REQUEST":return{loading:!0};case"ORDER_PAY_SUCCESS":return{loading:!1,success:!0};case"ORDER_PAY_FAIL":return{loading:!1,error:t.payload};case"ORDER_PAY_RESET":return{};default:return e}},myOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_MINE_LIST_REQUEST":return{loading:!0};case"ORDER_MINE_LIST_SUCCESS":return{loading:!1,orders:t.payload};case"ORDER_MINE_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},userProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_DETAILS_REQUEST":return{profileLoading:!0};case"USER_DETAILS_SUCCESS":return{profileLoading:!1,user:t.payload};case"USER_DETAILS_FAIL":return{profileLoading:!1,error:t.payload};default:return e}},userProfileUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_UPDATE_PROFILE_REQUEST":return{loading:!0};case"USER_UPDATE_PROFILE_SUCCESS":return{loading:!1,success:!0};case"USER_UPDATE_PROFILE_FAIL":return{loading:!1,error:t.payload};case"USER_UPDATE_PROFILE_RESET":return{};default:return e}},orderslist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_LIST_REQUEST":return{loading:!0};case"ORDER_LIST_SUCCESS":return{loading:!1,orders:t.payload};case"ORDER_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},orderDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_DELETE_REQUEST":return{loading:!0};case"ORDER_DELETE_SUCCESS":return{loading:!1,success:!0};case"ORDER_DELETE_RESET":return{};case"ORDER_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},orderDeliver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_DELIVER_REQUEST":return{loading:!0};case"ORDER_DELIVER_SUCCESS":return{loading:!1,success:!0};case"ORDER_DELIVER_RESET":return{};case"ORDER_DELIVER_FAIL":return{loading:!1,error:t.payload};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LIST_REQUEST":return{loading:!0};case"USER_LIST_SUCCESS":return{loading:!1,users:t.payload};case"USER_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},deleteUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_DELETE_REQUEST":return{loading:!0};case"USER_DELETE_SUCCESS":return{loading:!1,success:!0};case"USER_DELETE_FAIL":return{loading:!1,error:t.payload};case"USER_DELETE_RESET":return{};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_EDIT_REQUEST":return{loading:!0};case"USER_EDIT_SUCCESS":return{loading:!1,success:!0};case"USER_EDIT_FAIL":return{loading:!1,error:t.payload};case"USER_EDIT_RESET":return{};default:return e}},topSellers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LIST_REQUEST":return{loading:!0};case"USER_LIST_SUCCESS":return{loading:!1,users:t.payload};case"USER_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},productCategoryList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{categories:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_CATEGORY_REQUEST":return{loading:!0,categories:[]};case"PRODUCT_CATEGORY_SUCCESS":return{loading:!1,categories:t.payload};case"PRODUCT_CATEGORY_FAIL":return{loading:!1,error:t.payload};default:return e}},productCreateReview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_REVIEW_CREATE_REQUEST":return{loading:!0};case"PRODUCT_REVIEW_CREATE_SUCCESS":return{loading:!1,success:!0,review:t.payload};case"PRODUCT_REVIEW_CREATE_FAIL":return{loading:!1,error:t.payload};case"PRODUCT_REVIEW_CREATE_RESET":return{};default:return e}},mapAddress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ADDRESS_MAP_CONFIRM":return{address:t.payload};default:return e}}}),ge=Object(oe.e)(pe,Ee,de(Object(oe.a)(ie.a)));s.a.render(r.a.createElement(l.a,{store:ge},r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.c2221259.chunk.js.map